{% extends 'base.html' %}

{% block title %}Attendance{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <span class="fw-semibold fs-5">Attendance</span>
  <a href="{{ request.META.HTTP_REFERER|default:'/dashboard/' }}" class="btn btn-outline-dark btn-sm">← Back</a>
</div>
<h3>Attendance — {{ today }}</h3>

<div class="card p-3 mt-3">
  <p><strong>Check-in:</strong>
    {% if record and record.check_in %}{{ record.check_in|date:"H:i:s" }}{% else %}Not done{% endif %}
  </p>

  <p><strong>Check-out:</strong>
    {% if record and record.check_out %}{{ record.check_out|date:"H:i:s" }}{% else %}Not done{% endif %}
  </p>

  <p><strong>Total Hours:</strong>
    {% if record %}{{ record.total_hours }}{% else %}0{% endif %}
  </p>

  <div class="mt-3">
    <form method="post" action="{% url 'attendance:check_in' %}">
      {% csrf_token %}
      <button class="btn btn-success" {% if record and record.check_in %}disabled{% endif %}>
        Check In
      </button>
    </form>

    <form method="post" action="{% url 'attendance:check_out' %}" class="mt-2">
      {% csrf_token %}
      <button class="btn btn-danger" {% if not record or record.check_out %}disabled{% endif %}>
        Check Out
      </button>
    </form>
  </div>
</div>

<a href="{% url 'attendance:monthly' %}" class="btn btn-primary mt-4">View Monthly Report</a>
{% endblock %}
