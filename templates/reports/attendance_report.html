{% extends "base.html" %}
{% block content %}
<h3 class="fw-bold mb-3">Attendance Report</h3>

<form method="get" class="d-flex gap-2 mb-3">
<select name="month" class="form-select" style="max-width:170px;">
  <option value="">Month</option>
  {% for num,name in {
    '1':'January','2':'February','3':'March','4':'April','5':'May','6':'June',
    '7':'July','8':'August','9':'September','10':'October','11':'November','12':'December'
  }.items %}
    <option value="{{ num }}" {% if request.GET.month == num %}selected{% endif %}>
      {{ name }}
    </option>

</select>

    <input type="number" name="year" class="form-control" placeholder="Year"
       style="max-width:150px;" value="{{ request.GET.year }}">

    <button class="btn btn-dark">Filter</button>
    <a href="?export=csv" class="btn btn-success">Export CSV</a>
    <a href="?export=pdf" class="btn btn-danger">Export PDF</a>
</form>

<table class="table table-bordered table-striped text-center">
<thead class="table-dark">
<tr>
  <th>Employee</th>
  <th>Date</th>
  <th>Check-in</th>
  <th>Check-out</th>
  <th>Total Hours</th>
</tr>
</thead>
<tbody>
{% for r in records %}
<tr>
  <td>{{ r.user.get_full_name }}</td>
  <td>{{ r.date }}</td>
  <td>{{ r.check_in }}</td>
  <td>{{ r.check_out }}</td>
  <td>{{ r.total_hours }}</td>
</tr>
{% endfor %}
</tbody>
</table>

{% endblock %}
