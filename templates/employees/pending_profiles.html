{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <span class="fw-semibold fs-5">Pending Profiles</span>
  <a href="{{ request.META.HTTP_REFERER|default:'/dashboard/' }}" class="btn btn-outline-dark btn-sm">‚Üê Back</a>
</div>

<h3 class="fw-bold mb-4">Profiles Awaiting Approval</h3>

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-success">{{ message }}</div>
  {% endfor %}
{% endif %}

<table class="table table-bordered table-striped align-middle">
  <thead>
    <tr>
      <th>Employee</th>
      <th>Department</th>
      <th>Designation</th>
      <th>Last Updated</th>
      <th style="width: 120px;">Action</th>
    </tr>
  </thead>

  <tbody>
    {% for p in profiles %}
    <tr>
      <td>{{ p.user.get_full_name|default:p.user.username }}</td>
      <td>{{ p.user.employee.department }}</td>
      <td>{{ p.user.employee.designation }}</td>
      <td>{{ p.updated_at|date:"d-m-Y h:i A" }}</td>
      <td>
        <a href="/employees/approve-profile/{{ p.id }}/" class="btn btn-success btn-sm">
          Approve
        </a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" class="text-center text-muted">No pending profiles.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
