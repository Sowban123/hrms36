{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <span class="fw-semibold fs-5">Employees</span>
  <a href="{{ request.META.HTTP_REFERER|default:'/dashboard/' }}" class="btn btn-outline-dark btn-sm">‚Üê Back</a>
</div>

<h3 class="fw-bold mb-4">Employees</h3>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>Emp ID</th>
      <th>Name</th>
      <th>Department</th>
      <th>Designation</th>
      <th>Position</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
    {% for emp in employees %}
    <tr>
      <td>{{ emp.employee_id }}</td>
      <td>{{ emp.user.get_full_name|default:emp.user.username }}</td>
      <td>{{ emp.department }}</td>
      <td>{{ emp.designation }}</td>

      <td>
        {% if emp.department.manager and emp.department.manager.id == emp.id %}
          <span class="badge bg-success">Manager</span>
        {% else %}
          <span class="badge bg-secondary">Employee</span>
        {% endif %}
      </td>

      <td>
<a href="{% url 'employees:view_profile' %}?emp={{ emp.employee_id }}"
   class="btn btn-sm btn-outline-info">
   View
</a>

{{ emp.id }} / {{ emp.employee_id }}

  <a href="{% url 'employees:update' emp.id %}" class="btn btn-sm btn-outline-warning">Edit</a>
  <a href="{% url 'employees:delete' emp.id %}" class="btn btn-sm btn-outline-danger"
     onclick="return confirm('Are you sure you want to delete this employee?')">Delete</a>
</td>

    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
